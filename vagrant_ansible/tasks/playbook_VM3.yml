#host: vm3
- name: Update zookeeper.connect on VM2 server.properties
    lineinfile:
      path: /home/kafka/kafka/config/server.properties
      regexp: 'zookeeper.connect=.*'
      line: zookeeper.connect=hostvars[VM2]['ansible_default_ipv4']['address']

- name: Update advertised.listeners on VM2 server.properties
    lineinfile:
      path: /home/kafka/kafka/config/server.properties
      regexp: 'advertised.listeners=.*'
      line: advertised.listeners=PLAINTEXT://[VM2]['ansible_default_ipv4']['address']

- name: Update broker.id on VM2 server.properties
    lineinfile:
      path: /home/kafka/kafka/config/server.properties
      regexp: 'broker.id=.*'
      line: broker.id = 1